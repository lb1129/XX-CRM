import{k as q,G as E,r as g,J as V,a2 as x,w as z,g as A,Z as m,P as h,t as e,N as t,a3 as C,o as D,u as _,O as P,a4 as Z,a5 as j,a6 as I,a7 as k,a8 as G,_ as H}from"./index-dc8c2b3e.js";import{_ as J,F as L}from"./index-7dcd274f.js";import{u as M,_ as O}from"./file-18a5d598.js";import{B as T}from"./index-639a8ef6.js";import"./index-4ea8f53e.js";import{_ as K}from"./index-78918edd.js";import{I as Q}from"./index-44ec8905.js";import{_ as W}from"./TextArea-8ac3d9a4.js";import"./index-785ee1fa.js";import X from"./EditOutlined-f69158c9.js";import{a as Y,_ as ee}from"./index-24fe4e28.js";import"./responsiveObserve-f36051d4.js";import"./styleChecker-8d5d554d.js";import"./useSize-ae29bc17.js";import"./pickAttrs-7f85bd4a.js";import"./PaperClipOutlined-f427bcd5.js";import"./PictureTwoTone-e446ff31.js";import"./FileTwoTone-67a3edd5.js";import"./EyeOutlined-f3fe8c14.js";import"./DeleteOutlined-7d7066de.js";import"./DownloadOutlined-6f2a8a3b.js";import"./index-e0f11259.js";import"./raf-8f666c46.js";import"./CheckOutlined-d9e24a70.js";import"./useMergedState-e764f5b4.js";import"./index-748b043c.js";import"./ResizeObserver.es-0f9f8adb.js";import"./css-06fbc100.js";import"./DialogWrap-616d0276.js";import"./RightOutlined-fd7e8e2e.js";import"./objectDestructuringEmpty-65dee762.js";import"./RotateLeftOutlined-078e3205.js";import"./RotateRightOutlined-8a855cb6.js";import"./ZoomInOutlined-e59e78dd.js";import"./ZoomOutOutlined-9196c45d.js";import"./SearchOutlined-d669176f.js";import"./Password-88e9e6bd.js";import"./EyeInvisibleOutlined-6c6a1227.js";const oe={class:"basic-info-title"},te={class:"basic-info-image"},ae={class:"basic-info-image-content"},ne=q({__name:"BasicInfo",setup(se){const{t:r}=E(),l=g(!1),s=g(!1),o=V({nickname:"",profile:""}),i=x(),u=Promise;z(()=>{o.nickname=i.userInfo.nickname,o.profile=i.userInfo.profile});const w=async()=>{l.value=!0;try{await I({nickname:o.nickname,profile:o.profile}),k.success(r("whatSuccess",[r("updateBasicInfo")])),i.setUserInfo({nickname:o.nickname,profile:o.profile}),l.value=!1}catch{l.value=!1}},b=async a=>{s.value=!0;try{const n=await M(a.file);await I({avatar:n}),k.success(r("whatSuccess",[r("editAvatar")])),i.setUserInfo({avatar:n}),s.value=!1}catch{s.value=!1}};return(a,n)=>{const y=Q,c=J,B=W,f=T,$=L,d=ee,S=K,U=G,N=X,F=O,R=Y;return D(),A(C,null,[m("h1",oe,h(a.$t("basicInfo")),1),e(R,null,{default:t(()=>[e(d,{span:14},{default:t(()=>[e($,{layout:"vertical",hideRequiredMark:"",model:o,onFinish:w},{default:t(()=>[e(c,{label:a.$t("nickname"),name:"nickname",rules:[{validator:(p,v)=>!v||!/^[\u4e00-\u9fa5A-Za-z0-9_-]{4,10}$/.test(v)?_(u).reject(a.$t("nicknameRule")):_(u).resolve()}]},{default:t(()=>[e(y,{value:o.nickname,"onUpdate:value":n[0]||(n[0]=p=>o.nickname=p),placeholder:a.$t("pleaseEnterNickname")},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),e(c,{label:a.$t("profile"),name:"profile"},{default:t(()=>[e(B,{value:o.profile,"onUpdate:value":n[1]||(n[1]=p=>o.profile=p),placeholder:a.$t("profile"),rows:4},null,8,["value","placeholder"])]),_:1},8,["label"]),e(c,null,{default:t(()=>[e(f,{loading:l.value,type:"primary","html-type":"submit"},{default:t(()=>[P(h(a.$t("updateBasicInfo")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),e(d,{span:10,style:{"text-align":"center"}},{default:t(()=>[m("div",te,[e(U,{spinning:s.value},{default:t(()=>[m("div",ae,[e(S,{width:200,height:200,src:_(i).userInfo.avatar},null,8,["src"])])]),_:1},8,["spinning"]),Z(e(F,{class:"basic-info-image-edit","max-count":1,accept:"image/*","show-upload-list":!1,customRequest:b},{default:t(()=>[e(f,{shape:"circle",size:"large"},{icon:t(()=>[e(N)]),_:1})]),_:1},512),[[j,!s.value]])])]),_:1})]),_:1})],64)}}});const Je=H(ne,[["__scopeId","data-v-fb149545"]]);export{Je as default};
