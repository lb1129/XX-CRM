import{k as q,N as E,r as g,P as V,a7 as x,w as z,g as A,a3 as m,U as h,t as e,S as a,a8 as C,o as D,u as _,T as P,a9 as T,aa as j,ab as I,ac as k,ad as H,_ as L}from"./index-1c2243e8.js";import{_ as M,F as Z}from"./index-4fdb47bb.js";import{u as G,_ as J}from"./file-024dd7a3.js";import{B as K}from"./index-43e4a54e.js";import"./index-74ad1fe0.js";import{_ as O}from"./index-c8facd7d.js";import{I as Q}from"./index-e9d94504.js";import{_ as W}from"./TextArea-dd1789af.js";import"./index-fe45c867.js";import X from"./EditOutlined-0c052baf.js";import{a as Y,_ as ee}from"./index-c2a8bbdc.js";import"./responsiveObserve-fe298b0f.js";import"./styleChecker-3f62a67b.js";import"./useSize-b364c3e4.js";import"./pickAttrs-be2c4e2e.js";import"./PaperClipOutlined-fc518025.js";import"./PictureTwoTone-5d74130e.js";import"./FileTwoTone-da8394e4.js";import"./EyeOutlined-0c5d7360.js";import"./DeleteOutlined-d20375c7.js";import"./DownloadOutlined-e2eb1faa.js";import"./index-f1cf8f0a.js";import"./raf-8f666c46.js";import"./CheckOutlined-37393aeb.js";import"./useMergedState-5463b9bf.js";import"./index-794841c6.js";import"./ResizeObserver.es-0f9f8adb.js";import"./css-06fbc100.js";import"./DialogWrap-9d995493.js";import"./RightOutlined-bbe1192c.js";import"./objectDestructuringEmpty-72df4789.js";import"./RotateLeftOutlined-a4a09ed0.js";import"./RotateRightOutlined-da1944e1.js";import"./ZoomInOutlined-fe487e39.js";import"./ZoomOutOutlined-1af3f32a.js";import"./SearchOutlined-05d08e4a.js";import"./Password-acef6b8d.js";import"./EyeInvisibleOutlined-90617d38.js";const oe={class:"basic-info-title"},ae={class:"basic-info-image"},te={class:"basic-info-image-content"},ne=q({__name:"BasicInfo",setup(se){const{t:r}=E(),l=g(!1),s=g(!1),o=V({nickname:"",profile:""}),i=x(),u=Promise;z(()=>{o.nickname=i.userInfo.nickname,o.profile=i.userInfo.profile});const b=async()=>{l.value=!0;try{await I({nickname:o.nickname,profile:o.profile}),k.success(r("whatSuccess",[r("updateBasicInfo")])),i.setUserInfo({nickname:o.nickname,profile:o.profile}),l.value=!1}catch{l.value=!1}},w=async t=>{s.value=!0;try{const n=await G(t.file);await I({avatar:n}),k.success(r("whatSuccess",[r("editAvatar")])),i.setUserInfo({avatar:n}),s.value=!1}catch{s.value=!1}};return(t,n)=>{const y=Q,c=M,B=W,f=K,S=Z,d=ee,$=O,U=H,N=X,F=J,R=Y;return D(),A(C,null,[m("h1",oe,h(t.$t("basicInfo")),1),e(R,null,{default:a(()=>[e(d,{span:14},{default:a(()=>[e(S,{layout:"vertical",hideRequiredMark:"",model:o,onFinish:b},{default:a(()=>[e(c,{label:t.$t("nickname"),name:"nickname",rules:[{validator:(p,v)=>!v||!/^[\u4e00-\u9fa5A-Za-z0-9_-]{4,10}$/.test(v)?_(u).reject(t.$t("nicknameRule")):_(u).resolve()}]},{default:a(()=>[e(y,{value:o.nickname,"onUpdate:value":n[0]||(n[0]=p=>o.nickname=p),placeholder:t.$t("pleaseEnterNickname")},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),e(c,{label:t.$t("profile"),name:"profile"},{default:a(()=>[e(B,{value:o.profile,"onUpdate:value":n[1]||(n[1]=p=>o.profile=p),placeholder:t.$t("profile"),rows:4},null,8,["value","placeholder"])]),_:1},8,["label"]),e(c,null,{default:a(()=>[e(f,{loading:l.value,type:"primary","html-type":"submit"},{default:a(()=>[P(h(t.$t("updateBasicInfo")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),e(d,{span:10,style:{"text-align":"center"}},{default:a(()=>[m("div",ae,[e(U,{spinning:s.value},{default:a(()=>[m("div",te,[e($,{width:200,height:200,src:_(i).userInfo.avatar},null,8,["src"])])]),_:1},8,["spinning"]),T(e(F,{class:"basic-info-image-edit","max-count":1,accept:"image/*","show-upload-list":!1,customRequest:w},{default:a(()=>[e(f,{shape:"circle",size:"large"},{icon:a(()=>[e(N)]),_:1})]),_:1},512),[[j,!s.value]])])]),_:1})]),_:1})],64)}}});const Me=L(ne,[["__scopeId","data-v-fb149545"]]);export{Me as default};
