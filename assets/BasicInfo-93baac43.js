import{k as q,G as E,r as g,J as V,a2 as x,w as z,g as A,Z as m,P as h,t as e,N as t,a3 as C,o as D,u as _,O as P,a4 as Z,a5 as j,a6 as I,a7 as k,a8 as G,_ as H}from"./index-6e51944d.js";import{_ as J,F as L}from"./index-a6c120fd.js";import{u as M,_ as O}from"./file-db2511ad.js";import{B as T}from"./index-ce82d297.js";import"./index-8b74388f.js";import{_ as K}from"./index-aee1301c.js";import{I as Q}from"./index-65344370.js";import{_ as W}from"./TextArea-2341f90b.js";import"./index-2b571d7e.js";import X from"./EditOutlined-82759c0a.js";import{a as Y,_ as ee}from"./index-8b35c16e.js";import"./responsiveObserve-0ff66bf9.js";import"./styleChecker-1ceb0e84.js";import"./useSize-af1ce530.js";import"./pickAttrs-8531212d.js";import"./PaperClipOutlined-d49cd5d4.js";import"./PictureTwoTone-58c0fd9b.js";import"./FileTwoTone-78871870.js";import"./EyeOutlined-f290a789.js";import"./DeleteOutlined-a9faffdd.js";import"./DownloadOutlined-d2551002.js";import"./index-7fe8d555.js";import"./raf-8f666c46.js";import"./CheckOutlined-84959cd4.js";import"./useMergedState-c28d4cfa.js";import"./index-04e38bcf.js";import"./ResizeObserver.es-0f9f8adb.js";import"./css-06fbc100.js";import"./DialogWrap-fda6c6e3.js";import"./RightOutlined-16da6f59.js";import"./objectDestructuringEmpty-a7e3a486.js";import"./RotateLeftOutlined-844b048f.js";import"./RotateRightOutlined-0ada148a.js";import"./ZoomInOutlined-2a91b554.js";import"./ZoomOutOutlined-6b3829b4.js";import"./SearchOutlined-f9fdeceb.js";import"./Password-ee7d264e.js";import"./EyeInvisibleOutlined-3e6d4c8d.js";const oe={class:"basic-info-title"},te={class:"basic-info-image"},ae={class:"basic-info-image-content"},ne=q({__name:"BasicInfo",setup(se){const{t:r}=E(),l=g(!1),s=g(!1),o=V({nickname:"",profile:""}),i=x(),u=Promise;z(()=>{o.nickname=i.userInfo.nickname,o.profile=i.userInfo.profile});const w=async()=>{l.value=!0;try{await I({nickname:o.nickname,profile:o.profile}),k.success(r("whatSuccess",[r("updateBasicInfo")])),i.setUserInfo({nickname:o.nickname,profile:o.profile}),l.value=!1}catch{l.value=!1}},b=async a=>{s.value=!0;try{const n=await M(a.file);await I({avatar:n}),k.success(r("whatSuccess",[r("editAvatar")])),i.setUserInfo({avatar:n}),s.value=!1}catch{s.value=!1}};return(a,n)=>{const y=Q,c=J,B=W,f=T,$=L,d=ee,S=K,U=G,N=X,F=O,R=Y;return D(),A(C,null,[m("h1",oe,h(a.$t("basicInfo")),1),e(R,null,{default:t(()=>[e(d,{span:14},{default:t(()=>[e($,{layout:"vertical",hideRequiredMark:"",model:o,onFinish:w},{default:t(()=>[e(c,{label:a.$t("nickname"),name:"nickname",rules:[{validator:(p,v)=>!v||!/^[\u4e00-\u9fa5A-Za-z0-9_-]{4,10}$/.test(v)?_(u).reject(a.$t("nicknameRule")):_(u).resolve()}]},{default:t(()=>[e(y,{value:o.nickname,"onUpdate:value":n[0]||(n[0]=p=>o.nickname=p),placeholder:a.$t("pleaseEnterNickname")},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),e(c,{label:a.$t("profile"),name:"profile"},{default:t(()=>[e(B,{value:o.profile,"onUpdate:value":n[1]||(n[1]=p=>o.profile=p),placeholder:a.$t("profile"),rows:4},null,8,["value","placeholder"])]),_:1},8,["label"]),e(c,null,{default:t(()=>[e(f,{loading:l.value,type:"primary","html-type":"submit"},{default:t(()=>[P(h(a.$t("updateBasicInfo")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),e(d,{span:10,style:{"text-align":"center"}},{default:t(()=>[m("div",te,[e(U,{spinning:s.value},{default:t(()=>[m("div",ae,[e(S,{width:200,height:200,src:_(i).userInfo.avatar},null,8,["src"])])]),_:1},8,["spinning"]),Z(e(F,{class:"basic-info-image-edit","max-count":1,accept:"image/*","show-upload-list":!1,customRequest:b},{default:t(()=>[e(f,{shape:"circle",size:"large"},{icon:t(()=>[e(N)]),_:1})]),_:1},512),[[j,!s.value]])])]),_:1})]),_:1})],64)}}});const Je=H(ne,[["__scopeId","data-v-fb149545"]]);export{Je as default};
