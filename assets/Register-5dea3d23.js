import{k as U,N as V,O as q,r as f,P as B,h as L,Q as F,R as j,S as t,o as P,t as o,u as n,T as w,U as _,g as A,V as D,W as I,Z as M,Y as H}from"./index-8c2c8a7d.js";import{_ as O,F as Q}from"./index-4fee7edb.js";import"./index-82e103c7.js";import{B as W}from"./index-290b7f19.js";import{I as Y}from"./index-814594e5.js";import Z from"./Layout-d96e900d.js";import{u as G,i as J,a as K}from"./useCountDown-443eea55.js";import{_ as X}from"./Password-c77b6401.js";import{_ as x,a as ee}from"./index-84bb0212.js";import"./responsiveObserve-40564c18.js";import"./styleChecker-28819520.js";import"./useSize-e9a94cb6.js";import"./ResizeObserver.es-0f9f8adb.js";import"./raf-8f666c46.js";import"./RightOutlined-37847992.js";import"./index-6a3c15a3.js";import"./index.vue_vue_type_script_setup_true_lang-34f81b9a.js";import"./index-c4b2cc4a.js";import"./index-b68f3fb7.js";import"./index-af46d32f.js";import"./Overflow-578823e9.js";/* empty css              */import"./index-3f52900e.js";import"./EyeOutlined-500bfa08.js";import"./EyeInvisibleOutlined-6d89ff04.js";const oe={key:0},ze=U({__name:"Register",setup(re){const{t:d}=V(),k=q(),m=f(!1),c=f(!1),v=f(""),h=f(),[g,y]=G(60),r=B({username:"",password:"",confirmPassword:"",phone:"",code:""}),N=L(()=>g.value>0?`${d("retrieve")}${g.value}s`:d("getVerificationCode")),R=async()=>{var e;c.value=!0;try{const a=await((e=h.value)==null?void 0:e.validateFields("phone")),p=await I(Number(a==null?void 0:a.phone));v.value=p.data,y(),c.value=!1}catch{c.value=!1}},z=async()=>{m.value=!0;try{await M({username:r.username,password:r.password,phone:Number(r.phone),code:r.code}),H.success({message:d("tip"),description:d("registerSuccess"),duration:2}),setTimeout(()=>{k.push({name:"Login"})},2e3),m.value=!1}catch{m.value=!1}},i=Promise;return(e,a)=>{const p=Y,l=O,$=X,b=x,C=W,E=ee,S=F("router-link"),T=Q;return P(),j(Z,null,{default:t(()=>[o(T,{ref_key:"formRef",ref:h,model:r,onFinish:z},{default:t(()=>[o(l,{name:"username",rules:[{required:!0,message:e.$t("pleaseEnterAccount")}]},{default:t(()=>[o(p,{size:"large",placeholder:e.$t("account"),value:r.username,"onUpdate:value":a[0]||(a[0]=s=>r.username=s)},null,8,["placeholder","value"])]),_:1},8,["rules"]),o(l,{name:"password",rules:[{required:!0,message:e.$t("pleaseEnterPassword")},{validator:(s,u)=>u&&!n(J)(u)?n(i).reject(e.$t("passwordRule")):n(i).resolve()}]},{default:t(()=>[o($,{size:"large",placeholder:e.$t("password"),value:r.password,"onUpdate:value":a[1]||(a[1]=s=>r.password=s)},null,8,["placeholder","value"])]),_:1},8,["rules"]),o(l,{name:"confirmPassword",rules:[{required:!0,message:e.$t("pleaseEnterPassword")},{validator:(s,u)=>r.password&&u!==r.password?n(i).reject(e.$t("twoPasswordsDoNotMatch")):n(i).resolve()}]},{default:t(()=>[o($,{size:"large",placeholder:e.$t("confirmPassword"),value:r.confirmPassword,"onUpdate:value":a[2]||(a[2]=s=>r.confirmPassword=s)},null,8,["placeholder","value"])]),_:1},8,["rules"]),o(l,{name:"phone",rules:[{required:!0,message:e.$t("pleaseEnterMobileNumber")},{validator:(s,u)=>u&&!n(K)(u)?n(i).reject(e.$t("phoneRule")):n(i).resolve()}]},{default:t(()=>[o(p,{size:"large",placeholder:e.$t("mobileNumber"),value:r.phone,"onUpdate:value":a[3]||(a[3]=s=>r.phone=s)},null,8,["placeholder","value"])]),_:1},8,["rules"]),o(E,{gutter:16},{default:t(()=>[o(b,{span:16},{default:t(()=>[o(l,{name:"code",rules:[{required:!0,message:e.$t("pleaseEnterVerificationCode")}]},{default:t(()=>[o(p,{size:"large",placeholder:e.$t("verificationCode"),value:r.code,"onUpdate:value":a[4]||(a[4]=s=>r.code=s)},null,8,["placeholder","value"])]),_:1},8,["rules"])]),_:1}),o(b,{span:8},{default:t(()=>[o(C,{block:"",size:"large",loading:c.value,disabled:n(g)>0,onClick:R},{default:t(()=>[w(_(N.value),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),v.value?(P(),A("div",oe,_(v.value),1)):D("",!0),o(l,null,{default:t(()=>[o(S,{to:{name:"Login"}},{default:t(()=>[w(_(e.$t("haveAnAccount")),1)]),_:1})]),_:1}),o(l,null,{default:t(()=>[o(C,{size:"large",loading:m.value,block:"",type:"primary","html-type":"submit"},{default:t(()=>[w(_(e.$t("register")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})}}});export{ze as default};
