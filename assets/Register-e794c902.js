import{k as q,G as B,H as I,r as m,J as L,h as S,K as T,M as V,N as t,o as k,t as o,u as l,O as w,P as g,g as F,Q as j,R as A,U as M,T as D}from"./index-7795d834.js";import{_ as H,F as G}from"./index-0300e37a.js";import"./index-bca091c2.js";import{B as J}from"./index-45031711.js";import{I as K}from"./index-1e6f9716.js";import O from"./Layout-37622611.js";import{i as Q,a as W}from"./validate-e1f633e5.js";import{_ as X}from"./Password-87e590eb.js";import{_ as Y,a as Z}from"./index-e250baf1.js";import"./responsiveObserve-9e8a91c7.js";import"./styleChecker-a10a42d8.js";import"./useSize-0bb4acee.js";import"./ResizeObserver.es-0f9f8adb.js";import"./raf-8f666c46.js";import"./RightOutlined-54bd836f.js";import"./index-c1849376.js";import"./index.vue_vue_type_script_setup_true_lang-e6ab6084.js";import"./index-9b7f8db2.js";import"./index-a3470541.js";import"./index-d2dab15c.js";import"./Overflow-0b8ab073.js";/* empty css              */import"./index-edebc165.js";import"./EyeOutlined-d6bb0a8f.js";import"./EyeInvisibleOutlined-df82cb22.js";const x={key:0},Ne=q({__name:"Register",setup(ee){const{t:c}=B(),y=I(),f=m(!1),v=m(!1),_=m(""),h=m(),i=m(0),r=L({username:"",password:"",confirmPassword:"",phone:"",code:""}),C=S(()=>i.value>0?`${c("retrieve")}${i.value}s`:c("getVerificationCode")),N=async()=>{var e;v.value=!0;try{const a=await((e=h.value)==null?void 0:e.validateFields("phone")),d=await A(Number(a==null?void 0:a.phone));_.value=d.data,i.value=60;const n=setInterval(()=>{i.value<=0?(_.value="",clearInterval(n)):i.value--},1e3);v.value=!1}catch{v.value=!1}},z=async()=>{f.value=!0;try{await M({username:r.username,password:r.password,phone:Number(r.phone),code:r.code}),D.success({message:c("tip"),description:c("registerSuccess"),duration:2}),setTimeout(()=>{y.push({name:"Login"})},2e3),f.value=!1}catch{f.value=!1}},p=Promise;return(e,a)=>{const d=K,n=H,$=X,b=Y,P=J,R=Z,E=T("router-link"),U=G;return k(),V(O,null,{default:t(()=>[o(U,{ref_key:"formRef",ref:h,model:r,onFinish:z},{default:t(()=>[o(n,{name:"username",rules:[{required:!0,message:e.$t("pleaseEnterAccount")}]},{default:t(()=>[o(d,{size:"large",placeholder:e.$t("account"),value:r.username,"onUpdate:value":a[0]||(a[0]=s=>r.username=s)},null,8,["placeholder","value"])]),_:1},8,["rules"]),o(n,{name:"password",rules:[{required:!0,message:e.$t("pleaseEnterPassword")},{validator:(s,u)=>u&&!l(Q)(u)?l(p).reject(e.$t("passwordRule")):l(p).resolve()}]},{default:t(()=>[o($,{size:"large",placeholder:e.$t("password"),value:r.password,"onUpdate:value":a[1]||(a[1]=s=>r.password=s)},null,8,["placeholder","value"])]),_:1},8,["rules"]),o(n,{name:"confirmPassword",rules:[{required:!0,message:e.$t("pleaseEnterPassword")},{validator:(s,u)=>r.password&&u!==r.password?l(p).reject(e.$t("twoPasswordsDoNotMatch")):l(p).resolve()}]},{default:t(()=>[o($,{size:"large",placeholder:e.$t("confirmPassword"),value:r.confirmPassword,"onUpdate:value":a[2]||(a[2]=s=>r.confirmPassword=s)},null,8,["placeholder","value"])]),_:1},8,["rules"]),o(n,{name:"phone",rules:[{required:!0,message:e.$t("pleaseEnterMobileNumber")},{validator:(s,u)=>u&&!l(W)(u)?l(p).reject(e.$t("phoneRule")):l(p).resolve()}]},{default:t(()=>[o(d,{size:"large",placeholder:e.$t("mobileNumber"),value:r.phone,"onUpdate:value":a[3]||(a[3]=s=>r.phone=s)},null,8,["placeholder","value"])]),_:1},8,["rules"]),o(R,{gutter:16},{default:t(()=>[o(b,{span:16},{default:t(()=>[o(n,{name:"code",rules:[{required:!0,message:e.$t("pleaseEnterVerificationCode")}]},{default:t(()=>[o(d,{size:"large",placeholder:e.$t("verificationCode"),value:r.code,"onUpdate:value":a[4]||(a[4]=s=>r.code=s)},null,8,["placeholder","value"])]),_:1},8,["rules"])]),_:1}),o(b,{span:8},{default:t(()=>[o(P,{block:"",size:"large",loading:v.value,disabled:i.value>0,onClick:N},{default:t(()=>[w(g(C.value),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),_.value?(k(),F("div",x,g(_.value),1)):j("",!0),o(n,null,{default:t(()=>[o(E,{to:{name:"Login"}},{default:t(()=>[w(g(e.$t("haveAnAccount")),1)]),_:1})]),_:1}),o(n,null,{default:t(()=>[o(P,{size:"large",loading:f.value,block:"",type:"primary","html-type":"submit"},{default:t(()=>[w(g(e.$t("register")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})}}});export{Ne as default};
