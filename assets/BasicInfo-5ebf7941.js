import{k as q,G as E,r as g,J as V,a2 as x,w as z,g as A,Z as m,P as h,t as e,N as t,a3 as C,o as D,u as _,O as P,a4 as Z,a5 as j,a6 as I,a7 as k,a8 as G,_ as H}from"./index-229910c2.js";import{_ as J,F as L}from"./index-cc1e96fe.js";import{u as M,_ as O}from"./file-12440e7f.js";import{B as T}from"./index-01c379f6.js";import"./index-deefb7b7.js";import{_ as K}from"./index-8da3d016.js";import{I as Q}from"./index-44e01acf.js";import{_ as W}from"./TextArea-06d84793.js";import"./index-795a6717.js";import X from"./EditOutlined-b4192f82.js";import{a as Y,_ as ee}from"./index-a022494b.js";import"./responsiveObserve-61a62e49.js";import"./styleChecker-b62d4b66.js";import"./useSize-f7792fc6.js";import"./pickAttrs-ea891464.js";import"./PaperClipOutlined-8261a7f1.js";import"./PictureTwoTone-d93a200c.js";import"./FileTwoTone-fa3f0ac3.js";import"./EyeOutlined-583b4f15.js";import"./DeleteOutlined-79f169e2.js";import"./DownloadOutlined-846fa1d9.js";import"./index-4501632f.js";import"./raf-8f666c46.js";import"./CheckOutlined-d728778f.js";import"./useMergedState-91929d99.js";import"./index-3f05e4ca.js";import"./ResizeObserver.es-0f9f8adb.js";import"./css-06fbc100.js";import"./DialogWrap-9e12d98c.js";import"./RightOutlined-b490dbce.js";import"./objectDestructuringEmpty-c6074f31.js";import"./RotateLeftOutlined-3b0df1c0.js";import"./RotateRightOutlined-7ce6974f.js";import"./ZoomInOutlined-991b899c.js";import"./ZoomOutOutlined-1c6a02ce.js";import"./SearchOutlined-a5e98867.js";import"./Password-691c673b.js";import"./EyeInvisibleOutlined-4f816e97.js";const oe={class:"basic-info-title"},te={class:"basic-info-image"},ae={class:"basic-info-image-content"},ne=q({__name:"BasicInfo",setup(se){const{t:r}=E(),l=g(!1),s=g(!1),o=V({nickname:"",profile:""}),i=x(),u=Promise;z(()=>{o.nickname=i.userInfo.nickname,o.profile=i.userInfo.profile});const w=async()=>{l.value=!0;try{await I({nickname:o.nickname,profile:o.profile}),k.success(r("whatSuccess",[r("updateBasicInfo")])),i.setUserInfo({nickname:o.nickname,profile:o.profile}),l.value=!1}catch{l.value=!1}},b=async a=>{s.value=!0;try{const n=await M(a.file);await I({avatar:n}),k.success(r("whatSuccess",[r("editAvatar")])),i.setUserInfo({avatar:n}),s.value=!1}catch{s.value=!1}};return(a,n)=>{const y=Q,c=J,B=W,f=T,$=L,d=ee,S=K,U=G,N=X,F=O,R=Y;return D(),A(C,null,[m("h1",oe,h(a.$t("basicInfo")),1),e(R,null,{default:t(()=>[e(d,{span:14},{default:t(()=>[e($,{layout:"vertical",hideRequiredMark:"",model:o,onFinish:w},{default:t(()=>[e(c,{label:a.$t("nickname"),name:"nickname",rules:[{validator:(p,v)=>!v||!/^[\u4e00-\u9fa5A-Za-z0-9_-]{4,10}$/.test(v)?_(u).reject(a.$t("nicknameRule")):_(u).resolve()}]},{default:t(()=>[e(y,{value:o.nickname,"onUpdate:value":n[0]||(n[0]=p=>o.nickname=p),placeholder:a.$t("pleaseEnterNickname")},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),e(c,{label:a.$t("profile"),name:"profile"},{default:t(()=>[e(B,{value:o.profile,"onUpdate:value":n[1]||(n[1]=p=>o.profile=p),placeholder:a.$t("profile"),rows:4},null,8,["value","placeholder"])]),_:1},8,["label"]),e(c,null,{default:t(()=>[e(f,{loading:l.value,type:"primary","html-type":"submit"},{default:t(()=>[P(h(a.$t("updateBasicInfo")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),e(d,{span:10,style:{"text-align":"center"}},{default:t(()=>[m("div",te,[e(U,{spinning:s.value},{default:t(()=>[m("div",ae,[e(S,{width:200,height:200,src:_(i).userInfo.avatar},null,8,["src"])])]),_:1},8,["spinning"]),Z(e(F,{class:"basic-info-image-edit","max-count":1,accept:"image/*","show-upload-list":!1,customRequest:b},{default:t(()=>[e(f,{shape:"circle",size:"large"},{icon:t(()=>[e(N)]),_:1})]),_:1},512),[[j,!s.value]])])]),_:1})]),_:1})],64)}}});const Je=H(ne,[["__scopeId","data-v-fb149545"]]);export{Je as default};
