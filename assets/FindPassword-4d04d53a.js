import{k as E,G as F,H as I,r as d,J as L,h as T,K as V,M as q,N as a,o as k,t as o,u as l,O as g,P as w,g as U,Q as j,R as M,S as A,T as D}from"./index-9a9dea24.js";import{_ as H,F as G}from"./index-813fd22a.js";import"./index-516dbfe4.js";import{B as J}from"./index-68eb0c53.js";import{I as K}from"./index-726ed5a1.js";import O from"./Layout-ae8bcbde.js";import{i as Q,a as W}from"./validate-e1f633e5.js";import{_ as X}from"./Password-3aefd627.js";import"./index-9d1b6b21.js";import"./index-ecb57d44.js";import{_ as Y,a as Z}from"./index-15edd16c.js";import"./mockjs-725317a4.js";import"./responsiveObserve-8826d52d.js";import"./styleChecker-7aca3c68.js";import"./useSize-26445c7c.js";import"./ResizeObserver.es-0f9f8adb.js";import"./raf-8f666c46.js";import"./RightOutlined-c94e739b.js";import"./index-6f765ef8.js";import"./index.vue_vue_type_script_setup_true_lang-3577a888.js";import"./index-5ba09711.js";import"./index-9678b618.js";import"./index-904930ae.js";import"./Overflow-187acd9e.js";/* empty css              */import"./index-b8b689fb.js";import"./EyeOutlined-99b55777.js";import"./EyeInvisibleOutlined-6e705fc5.js";import"./SearchOutlined-4890e0a9.js";import"./TextArea-41c9f5dc.js";const x={key:0},Ee=E({__name:"FindPassword",setup(ee){const{t:m}=F(),y=I(),c=d(!1),f=d(!1),_=d(""),h=d(),u=d(0),r=L({password:"",confirmPassword:"",phone:"",code:""}),C=T(()=>u.value>0?`${m("retrieve")}${u.value}s`:m("getVerificationCode")),N=async()=>{var e;f.value=!0;try{const t=await((e=h.value)==null?void 0:e.validateFields("phone")),v=await M(t==null?void 0:t.phone);_.value=v.data,u.value=60;const n=setInterval(()=>{u.value<=0?(_.value="",clearInterval(n)):u.value--},1e3);f.value=!1}catch{f.value=!1}},z=async()=>{c.value=!0;try{await A({password:r.password,phone:Number(r.phone),code:r.code}),D.success({message:m("tip"),description:m("findPasswordSuccess"),duration:2}),setTimeout(()=>{y.push({name:"Login"})},2e3),c.value=!1}catch{c.value=!1}},p=Promise;return(e,t)=>{const v=X,n=H,P=K,$=Y,b=J,R=Z,S=V("router-link"),B=G;return k(),q(O,null,{default:a(()=>[o(B,{ref_key:"formRef",ref:h,model:r,onFinish:z},{default:a(()=>[o(n,{name:"password",rules:[{required:!0,message:e.$t("pleaseEnterNewPassword")},{validator:(s,i)=>i&&!l(Q)(i)?l(p).reject(e.$t("passwordRule")):l(p).resolve()}]},{default:a(()=>[o(v,{size:"large",placeholder:e.$t("newPassword"),value:r.password,"onUpdate:value":t[0]||(t[0]=s=>r.password=s)},null,8,["placeholder","value"])]),_:1},8,["rules"]),o(n,{name:"confirmPassword",rules:[{required:!0,message:e.$t("pleaseEnterPassword")},{validator:(s,i)=>r.password&&i!==r.password?l(p).reject(e.$t("twoPasswordsDoNotMatch")):l(p).resolve()}]},{default:a(()=>[o(v,{size:"large",placeholder:e.$t("confirmPassword"),value:r.confirmPassword,"onUpdate:value":t[1]||(t[1]=s=>r.confirmPassword=s)},null,8,["placeholder","value"])]),_:1},8,["rules"]),o(n,{name:"phone",rules:[{required:!0,message:e.$t("pleaseEnterMobileNumber")},{validator:(s,i)=>i&&!l(W)(i)?l(p).reject(e.$t("phoneRule")):l(p).resolve()}]},{default:a(()=>[o(P,{size:"large",placeholder:e.$t("mobileNumber"),value:r.phone,"onUpdate:value":t[2]||(t[2]=s=>r.phone=s)},null,8,["placeholder","value"])]),_:1},8,["rules"]),o(R,{gutter:16},{default:a(()=>[o($,{span:16},{default:a(()=>[o(n,{name:"code",rules:[{required:!0,message:e.$t("pleaseEnterVerificationCode")}]},{default:a(()=>[o(P,{size:"large",placeholder:e.$t("verificationCode"),value:r.code,"onUpdate:value":t[3]||(t[3]=s=>r.code=s)},null,8,["placeholder","value"])]),_:1},8,["rules"])]),_:1}),o($,{span:8},{default:a(()=>[o(b,{block:"",size:"large",loading:f.value,disabled:u.value>0,onClick:N},{default:a(()=>[g(w(C.value),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),_.value?(k(),U("div",x,w(_.value),1)):j("",!0),o(n,null,{default:a(()=>[o(S,{to:{name:"Login"}},{default:a(()=>[g(w(e.$t("haveAnAccount")),1)]),_:1})]),_:1}),o(n,null,{default:a(()=>[o(b,{size:"large",loading:c.value,block:"",type:"primary","html-type":"submit"},{default:a(()=>[g(w(e.$t("confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})}}});export{Ee as default};
