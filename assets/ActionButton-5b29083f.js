import{k as O,r as f,x as g,y as h,t as k,l as c}from"./index-229910c2.js";import{c as P,B as x}from"./index-01c379f6.js";import{u as F}from"./useDestroyed-968e5b78.js";var R={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:Object,emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function p(s){return!!(s&&s.then)}const E=O({compatConfig:{MODE:3},name:"ActionButton",props:R,setup:function(e,y){var B=y.slots,u=f(!1),v=f(),r=f(!1),m,d=F();g(function(){e.autofocus&&(m=setTimeout(function(){var n;return(n=v.value.$el)===null||n===void 0?void 0:n.focus()}))}),h(function(){clearTimeout(m)});var C=function(o){var t=e.close;p(o)&&(r.value=!0,o.then(function(){d.value||(r.value=!1),t.apply(void 0,arguments),u.value=!1},function(l){console.error(l),d.value||(r.value=!1),u.value=!1}))},b=function(o){var t=e.actionFn,l=e.close,i=l===void 0?function(){}:l;if(!u.value){if(u.value=!0,!t){i();return}var a;if(e.emitEvent){if(a=t(o),e.quitOnNullishReturnValue&&!p(a)){u.value=!1,i(o);return}}else if(t.length)a=t(i),u.value=!1;else if(a=t(),!a){i();return}C(a)}};return function(){var n=e.type,o=e.prefixCls,t=e.buttonProps;return k(x,c(c(c({},P(n)),{},{onClick:b,loading:r.value,prefixCls:o},t),{},{ref:v}),B)}}});export{E as A};
