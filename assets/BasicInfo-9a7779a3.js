import{k as q,G as E,r as g,J as V,a1 as x,w as z,g as A,Y as c,P as h,t as e,N as t,a2 as C,o as D,u as _,O as P,a3 as j,a4 as G,a5 as I,a6 as k,a7 as H,_ as J}from"./index-9a9dea24.js";import{_ as L,F as M}from"./index-813fd22a.js";import{u as O,_ as T}from"./file-46681184.js";import{B as Y}from"./index-68eb0c53.js";import"./index-516dbfe4.js";import{_ as Z}from"./index-a49242fa.js";import{I as K}from"./index-726ed5a1.js";import{_ as Q}from"./TextArea-41c9f5dc.js";import"./index-9d1b6b21.js";import W from"./EditOutlined-906d05e5.js";import{a as X,_ as ee}from"./index-15edd16c.js";import"./mockjs-725317a4.js";import"./responsiveObserve-8826d52d.js";import"./styleChecker-7aca3c68.js";import"./useSize-26445c7c.js";import"./pickAttrs-42e5daec.js";import"./PaperClipOutlined-b8b3af34.js";import"./PictureTwoTone-ef55434c.js";import"./FileTwoTone-da6dcda1.js";import"./EyeOutlined-99b55777.js";import"./DeleteOutlined-b44db716.js";import"./DownloadOutlined-64b78257.js";import"./index-9678b618.js";import"./raf-8f666c46.js";import"./CheckOutlined-9d9092b5.js";import"./useMergedState-eb50c019.js";import"./index-ecb57d44.js";import"./ResizeObserver.es-0f9f8adb.js";import"./css-06fbc100.js";import"./DialogWrap-53abc7cb.js";import"./RightOutlined-c94e739b.js";import"./objectDestructuringEmpty-23eaae80.js";import"./RotateLeftOutlined-881c6ddb.js";import"./RotateRightOutlined-feec692d.js";import"./ZoomInOutlined-d339d0a0.js";import"./ZoomOutOutlined-9dbbecb0.js";import"./SearchOutlined-4890e0a9.js";import"./Password-3aefd627.js";import"./EyeInvisibleOutlined-6e705fc5.js";const oe={class:"basic-info-title"},te={class:"basic-info-image"},ae={class:"basic-info-image-content"},ne=q({__name:"BasicInfo",setup(se){const{t:r}=E(),l=g(!1),s=g(!1),o=V({nickname:"",profile:""}),i=x(),u=Promise;z(()=>{o.nickname=i.userInfo.nickname,o.profile=i.userInfo.profile});const w=async()=>{l.value=!0;try{await I({nickname:o.nickname,profile:o.profile}),k.success(r("whatSuccess",[r("basicInfo")])),i.setUserInfo({nickname:o.nickname,profile:o.profile}),l.value=!1}catch{l.value=!1}},b=async a=>{s.value=!0;try{const n=await O(a.file);await I({avatar:n}),k.success(r("whatSuccess",[r("editAvatar")])),i.setUserInfo({avatar:n}),s.value=!1}catch{s.value=!1}};return(a,n)=>{const y=K,m=L,$=Q,f=Y,B=M,d=ee,S=Z,U=H,N=W,F=T,R=X;return D(),A(C,null,[c("h1",oe,h(a.$t("basicInfo")),1),e(R,null,{default:t(()=>[e(d,{span:14},{default:t(()=>[e(B,{layout:"vertical",hideRequiredMark:"",model:o,onFinish:w},{default:t(()=>[e(m,{label:a.$t("nickname"),name:"nickname",rules:[{validator:(p,v)=>!v||!/^[\u4e00-\u9fa5A-Za-z0-9_-]{4,10}$/.test(v)?_(u).reject(a.$t("nicknameRule")):_(u).resolve()}]},{default:t(()=>[e(y,{value:o.nickname,"onUpdate:value":n[0]||(n[0]=p=>o.nickname=p),placeholder:a.$t("pleaseEnterNickname")},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),e(m,{label:a.$t("profile"),name:"profile"},{default:t(()=>[e($,{value:o.profile,"onUpdate:value":n[1]||(n[1]=p=>o.profile=p),placeholder:a.$t("profile"),rows:4},null,8,["value","placeholder"])]),_:1},8,["label"]),e(m,null,{default:t(()=>[e(f,{loading:l.value,type:"primary","html-type":"submit"},{default:t(()=>[P(h(a.$t("updateBasicInfo")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),e(d,{span:10,style:{"text-align":"center"}},{default:t(()=>[c("div",te,[e(U,{spinning:s.value},{default:t(()=>[c("div",ae,[e(S,{width:200,height:200,src:_(i).userInfo.avatar},null,8,["src"])])]),_:1},8,["spinning"]),j(e(F,{class:"basic-info-image-edit","max-count":1,accept:"image/*","show-upload-list":!1,customRequest:b},{default:t(()=>[e(f,{shape:"circle",size:"large"},{icon:t(()=>[e(N)]),_:1})]),_:1},512),[[G,!s.value]])])]),_:1})]),_:1})],64)}}});const Me=J(ne,[["__scopeId","data-v-f7fad693"]]);export{Me as default};
